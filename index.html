<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Aled Cheap Store Vouches</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">

  <!-- ADDED: Hardening CSS (no select, no callout, no drag) -->
  <style>
    html, body {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      -webkit-touch-callout: none;
      -webkit-tap-highlight-color: transparent;
    }
    img, .gallery-img, #modalImage {
      -webkit-user-drag: none;
      user-drag: none;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      user-select: none;
    }
    /* ADDED: Optional faint watermark effect (discourages clean screenshots). 
       Comment out if you don't like it. */
    .watermark::before {
      content: "Aled Cheap Store Vouches";
      position: fixed;
      bottom: 8%;
      right: 5%;
      opacity: 0.08;
      font-size: 5rem;
      font-weight: 800;
      transform: rotate(-15deg);
      pointer-events: none;
      z-index: 9998;
      white-space: nowrap;
    }
    /* ADDED: Class toggled to blur sensitive content during app switch/tab change */
    .blurred {
      filter: blur(14px);
      transition: filter 120ms linear;
    }
  </style>
</head>
<body class="bg-light watermark"><!-- ADDED: watermark class -->

  <!-- Navbar -->
  <nav class="navbar navbar-light bg-white shadow-sm">
    <div class="container">
      <a class="navbar-brand fw-bold fs-4" href="#">Aled Cheap Store Vouches</a>
    </div>
  </nav>

  <!-- Gallery -->
  <section class="container py-5">
    <div class="row g-4" id="galleryContainer">
      <!-- Images will load here from JSON -->
    </div>
  </section>

  <!-- Image Modal -->
  <div class="modal fade" id="imageModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content bg-transparent border-0">
        <div class="modal-body text-center">
          <img id="modalImage" src="" class="img-fluid rounded zoomable" alt="Zoom Image" draggable="false"><!-- ADDED draggable -->
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Load Gallery from JSON -->
  <script>
    const galleryContainer = document.getElementById('galleryContainer');
    const modalImage = document.getElementById('modalImage');

    // Load JSON data
    fetch('data.json')
      .then(response => response.json())
      .then(data => {
        data.forEach(item => {
          // Create column
          const col = document.createElement('div');
          col.className = "col-md-4 col-sm-6";

          // Create card
          col.innerHTML = `
            <div class="card shadow-sm border-0">
              <img src="${item.src}" alt="${item.alt}"
                class="card-img-top img-thumbnail gallery-img"
                data-bs-toggle="modal" data-bs-target="#imageModal"
                draggable="false" loading="lazy" decoding="async" />
            </div>
          `;
          galleryContainer.appendChild(col);
        });

        // Event listener for modal
        document.querySelectorAll('.gallery-img').forEach(img => {
          // ADDED: Block per-image context menu
          img.addEventListener('contextmenu', e => e.preventDefault());
          img.addEventListener('click', () => {
            modalImage.src = img.src;
          });
        });
      })
      .catch(error => console.error('Error loading JSON:', error));

    /* =======================
       ADDED: Security / Anti-Save / Anti-Inspect
       (Best-effort web protections)
    ======================== */

    // Global: disable context menu (right-click / long-press menus)
    document.addEventListener('contextmenu', e => e.preventDefault(), { capture: true });

    // Disable dragging assets
    document.addEventListener('dragstart', e => e.preventDefault());

    // Block text copying/cutting
    document.addEventListener('copy', e => { e.preventDefault(); });
    document.addEventListener('cut', e => { e.preventDefault(); });
    document.addEventListener('selectstart', e => { e.preventDefault(); }, { capture: true });

    // Disable image long-press save on mobile (without breaking scroll elsewhere)
    document.addEventListener('touchstart', e => {
      if (e.target.tagName === 'IMG') {
        e.preventDefault(); // cancels long-press Save/Share sheet
      }
    }, { passive: false });

    // Block common devtools / save / print shortcuts
    document.addEventListener('keydown', e => {
      const k = e.key.toLowerCase();
      const ctrl = e.ctrlKey || e.metaKey;

      // F12 or Ctrl+Shift+I/J/C => DevTools; Ctrl+U => View Source
      if (e.key === 'F12' || (ctrl && e.shiftKey && ['i','j','c'].includes(k)) || (ctrl && k === 'u')) {
        e.preventDefault(); alert('This action is disabled on this website.'); return false;
      }
      // Ctrl/Cmd+S => Save
      if (ctrl && k === 's') { e.preventDefault(); alert('Saving is disabled.'); return false; }
      // Ctrl/Cmd+P => Print
      if (ctrl && k === 'p') { e.preventDefault(); alert('Printing is disabled.'); return false; }
      // PrintScreen key
      if (e.key === 'PrintScreen') {
        e.preventDefault();
        try {
          navigator.clipboard.writeText('Screenshots are disabled on this website.');
        } catch (_) {}
        alert('Screenshots are not allowed.');
        return false;
      }
    }, { capture: true });

    // Try to blur content during app switch / tab background (discourages mobile screenshots)
    const blurSensitive = () => {
      document.querySelectorAll('img, video, canvas').forEach(el => el.classList.add('blurred'));
      document.body.classList.add('blurred');
    };
    const unblurSensitive = () => {
      document.querySelectorAll('img, video, canvas').forEach(el => el.classList.remove('blurred'));
      document.body.classList.remove('blurred');
    };
    document.addEventListener('visibilitychange', () => {
      if (document.hidden) blurSensitive(); else unblurSensitive();
    });
    window.addEventListener('blur', blurSensitive);
    window.addEventListener('focus', unblurSensitive);

    // Attempt to detect DevTools (heuristic) and blur
    (function devtoolsGuard(){
      let opened = false;
      const check = () => {
        const threshold = 160;
        const suspicious =
          (window.outerWidth - window.innerWidth > threshold) ||
          (window.outerHeight - window.innerHeight > threshold);
        if (suspicious && !opened) {
          opened = true; blurSensitive(); alert('Developer tools are restricted.');
        } else if (!suspicious && opened) {
          opened = false; unblurSensitive();
        }
      };
      setInterval(check, 800);
    })();

    // Intercept print dialogs (some browsers)
    if ('onbeforeprint' in window) {
      window.addEventListener('beforeprint', e => {
        e.preventDefault();
        blurSensitive();
        alert('Printing is disabled.');
      });
      window.addEventListener('afterprint', unblurSensitive);
    }

    // Clear clipboard periodically (light deterrent)
    setInterval(() => {
      if (document.hasFocus()) return;
      try { navigator.clipboard.writeText(''); } catch (_) {}
    }, 4000);
  </script>
</body>
</html>
